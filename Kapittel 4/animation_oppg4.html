<!DOCTYPE html>
<html>
    <head>
	<style>
	body {background-color: lightgrey;}
		
	#mainDiv {
				
		position:relative;
		width:1350px;
		height:629px;
		background-image: url("labyrint.png");
		padding:0px;
		margin:50px auto; 
		border: solid 2px black;
	}
	
	
	.ball {
		position:absolute;
		width:50px;
		height:50px;
		border: solid 2px black;
		border-radius:50%;
		background-color : blue;
		left:650px;
		top:-40px;
	}
	
	
	
	
	
	</style>
	
	</head>
	
	<body>
		<div id = "mainDiv">
		<button id = "btnBall">Ny Ball</button>				
		</div>
	</body>
	
	<script>
		var mainDiv = document.getElementById("mainDiv");
		var btnBall = document.getElementById("btnBall");
		
		
		
		//Array med objekt som inneholder de ulike stegene i animasjonen.
		//Vi kan manipulere med Javascript på vanlig måte ved behov
		var aniBallSteg = [
			{transform:"translate(0px,0px)"},
			{transform:"translate(0px,172px)",offset:0.13},
			{transform:"translate(-240px,360px)",offset:0.36},
			{transform:"translate(-240px,538px)",offset:0.49},
			{transform:"translate(496px,534px)",offset:1},
			
			
		];
		
		//Variabel som definerer timing til animasjon
		//Objekt, som vi kan manipulere med javascript
		var aniBallTiming = {
			duration:4000, //tid i millisekund for hele animasjonen
			iterations: 2, //Antall repetisjoner. For uendelig antall antall, sett til Infinity
			fill:"forwards",
		}
	
		
		
		
		
		btnBall.onclick = function(){
			
			if (aniBallTiming.iterations>0){ 
				//Generer ny ball, med tilfeldig farge
				var nyBall = document.createElement("div");
				nyBall.classList.add("ball");
				nyBall.style.backgroundColor = getRandomColor();
				mainDiv.appendChild(nyBall);
				nyBall.animate(aniBallSteg,aniBallTiming);
				
				//Ballen går litt kortere for hver gang.
				aniBallTiming.iterations -= 0.04;				
				}
				
			
		}
	

	function getRandomColor() {
		var letters = '0123456789ABCDEF';
		var color = '#';
		for (var i = 0; i < 6; i++) {
			color += letters[Math.floor(Math.random() * 16)];
		}
		return color;
}

	
		
	</script>
	
	
</html>